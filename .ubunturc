export CUDA_HOME=/usr/local/cuda
export DYLD_LIBRARY_PATH="$DYLD_LIBRARY_PATH:$CUDA_HOME/lib"
export PATH="$CUDA_HOME/bin:$PATH"

export PATH=$PATH:~/.local/bin:/home/student/r/rdiederichse/Downloads/Sources/slam6d-code/bin/


alias open="xdg-open"

# added by Miniconda3 installer
export PATH="$PATH:/home/student/r/rdiederichse/miniconda3/bin"
TF=~/Documents/TensorBros/ann-tensorflow

export PLUTO_WORKSPACE=/local/pluto_workspace

pg_pluto()
{
    source "$PLUTO_WORKSPACE/devel/setup.bash"
}

SECS=1
rosmux() {
    # why run pg_pluto at start of every session? dunno why, but the sessions
    # don't seem to inherit env vars unless we sleep excessively ¯\_(ツ)_/¯
    tmux new-session -ds pg-roscore
    sleep $SECS
    tmux send-keys -t pg-roscore "pg_pluto && roscore" Enter
    echo "Session: roscore started."
    sleep $SECS
    tmux new-session -ds pg-edit
    tmux send-keys -t pg-edit "pg_pluto && roscd hyperspectral_calibration" Enter
    echo "Session: edit started."
    tmux new-session -ds pg-rosbag
    tmux send-keys -t pg-rosbag "pg_pluto" Enter
    echo "Session: rosbag started."
    tmux new-session -ds pg-compile
    tmux send-keys -t pg-compile "pg_pluto && cd $PLUTO_WORKSPACE" Enter
    tmux send-keys -t pg-compile "catkin_make -DCMAKE_BUILD_TYPE=Debug -j7" Enter
    echo "Session: compile started."
    tmux new-session -ds pg-roslaunch
    tmux send-keys -t pg-roslaunch "pg_pluto" Enter
    # tmux split-window -v
    # tmux send-keys -t pg-roslaunch:0.0 "roslaunch hyperspectral_calibration colorize_cloud.launch use_rgb_only:=false start_pylon_driver:=true outdoor:=false"
    echo "Session: roslaunch started."
    tmux new-session -ds pg-riegl
    tmux split-window -v
    tmux send-keys -t pg-riegl:0.0 "pg_pluto && roslaunch riegl_driver riegl_vz400i.launch fields:=2" Enter
    tmux send-keys -t pg-riegl:0.1 "pg_pluto && roslaunch riegl_vline_teleop riegl_vz400i.launch phi_min:=270 phi_max:=330 theta_min:=30 theta_max:=150 phi_incr:=1 theta_incr:=1"
    echo "Session: riegl started."
    tmux new-session -ds pg-rviz
    tmux send-keys -t pg-rviz "sleep 1" Enter
    tmux send-keys -t pg-rviz "pg_pluto && rviz" Enter
    echo "Session: rviz started."
}

tfmux() {
    cd ~/Documents/TensorBros/ann-tensorflow
    tmux new-session -ds tf-edit
    tmux send-keys -t tf-edit "source activate tfenv" Enter
    tmux new-session -ds tf-run
    tmux send-keys -t tf-run "source activate tfenv" Enter
    tmux new-session -ds tf-jupyter
    tmux send-keys -t tf-jupyter "source activate tfenv" Enter
    tmux send-keys -t tf-jupyter "jupyter notebook" Enter
    tmux new-session -ds tf-ipython
    tmux send-keys -t tf-ipython "source activate tfenv" Enter
    tmux send-keys -t tf-ipython "ipython" Enter
}

cvmux() {
    sshfs rdiederichse@bias.cv.uos.de:/home/student/r/rdiederichse ~/bias\@cv/
    cd ~/bias@cv/qtpyvis
    tmux new-session -ds cv-edit
    tmux send-keys -t cv-edit "source activate rdiederichse-env" Enter
    tmux new-session -ds cv-install
    tmux send-keys -t cv-install "source activate rdiederichse-env" Enter
    tmux new-session -ds cv-monitor
    tmux send-keys -t cv-monitor "source activate rdiederichse-env" Enter
    tmux new-session -ds cv-run
    tmux send-keys -t cv-run "source activate rdiederichse-env" Enter
}

