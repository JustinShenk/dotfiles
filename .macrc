# Add own shell scripts to path
export PATH=$PATH:$HOME/Documents/Programming/Bash

export PATH=/Library/TeX/texbin:/opt/local/bin:/opt/local/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/X11/bin:/usr/texbin:/opt/local/libexec/qt4/bin/:/opt/local/Library/Frameworks/Python.framework/Versions/3.5/bin/:/opt/local/Library/Frameworks/Python.framework/Versions/2.7/bin/:$PATH

export PATH=/opt/local/lib/postgresql10/bin:$PATH

export PATH=$PATH:/Users/Rasmus/Library/Python/3.6/bin  # for PyPDF2 or something

# To simply javadoc generation
alias javadoc='find ./src -name *.java > ./sources_list.txt;javadoc -author -version -d doc @sources_list.txt; rm -f ./sources_list.txt'

export CLASSPATH=/Users/Rasmus/Library/Java/Extensions:.


# ================================================================================
# Change command line prompt into a penis with length proportional to the
# distance from root

# repeat char n times (found on SO)
repl() { printf "$1"'%.s' $(eval "echo {1.."$(($2))"}"); }

# print distance from root. This works only correctly if there is no slash at
# the end of the path given.
depth() {
   if [ "$1" = '/' ]; then
      echo 1
   else
      echo $(echo "$1/" | grep -o "/" | wc -l)
   fi
}
export PS1='`date +%H:%M:%S`: \[\e[1;33m\]8`repl 𝌆 $(depth "$(pwd)")`D\[\e[m\]:[\[\e[35m\]\W\[\e[m\]] '
# ================================================================================

export TEX=/users/rasmus/documents/latex/texnisches/
export DROPBOX='/Volumes/Macintosh HD/Users/Rasmus/Dropbox'

# Include scheme-listings
export TEXINPUTS=/usr/local/texlive/texmf-local/tex/latex/scheme-listings/:$TEXINPUTS
export TEXINPUTS=/usr/local/texlive/texmf-local/tex/latex/atmega-listings/:$TEXINPUTS

export UNI='/Users/Rasmus/Documents/Uni/'
alias uni='cd "$UNI"'

# Cheesus christ, why does pkg-config not know its own fckng standard directory,
# what the actual fuck.
PKG_CONFIG_PATH=/opt/local/lib/pkgconfig:$PKG_CONFIG_PATH:/usr/local/lib/pkgconfig
export PKG_CONFIG_PATH

# Change to current Finder directory
cdf() {
    target=`osascript -e 'tell application "Finder" to if (count of Finder windows) > 0 then get POSIX path of (target of front Finder window as text)'`
    if [ "$target" != "" ]; then
        cd "$target"; pwd
    else
        echo 'No Finder window found' >&2
    fi
}

export PATH=$PATH:~/Library/Python/2.7/bin/

# iTerm shell integration
source ~/.iterm2_shell_integration.`basename $SHELL`

# bash-completion
if [ -f /opt/local/etc/profile.d/bash_completion.sh ]; then
    . /opt/local/etc/profile.d/bash_completion.sh
fi

# Webdrivers
export PATH=$PATH:/usr/local/bin/Webdrivers/

# added by Miniconda3 installer
export PATH="$PATH:/Users/Rasmus/miniconda3/bin"

export THESIS_DIR='/Users/Rasmus/Documents/Uni/Master/Semester 6/'

thmux () {
    cd "$THESIS_DIR"
    tmux new-session -ds th-edit
    tmux send-keys -t th-edit "source activate mthesis-env" Enter
    tmux new-session -ds th-install
    tmux send-keys -t th-install "source activate mthesis-env" Enter
    tmux new-session -ds th-monitor
    tmux send-keys -t th-monitor "source activate mthesis-env" Enter
    tmux new-session -ds th-run
    tmux send-keys -t th-run "source activate mthesis-env" Enter
    tmux new-session -ds th-notebook
    tmux send-keys -t th-notebook "source activate mthesis-env" Enter
    tmux send-keys -t th-notebook "jupyter-notebook" Enter
}

export SHELL=$BASH

function fuckblue {
    set +x
    sudo killall coreaudiod
    sudo killall blued
    sudo renice -20 `pgrep bluetoothaudio`
    sudo renice -20 `pgrep iTunes`
    defaults write com.apple.BluetoothAudioAgent "Apple Bitpool Max (editable)" 80
    defaults write com.apple.BluetoothAudioAgent "Apple Bitpool Min (editable)" 80
    defaults write com.apple.BluetoothAudioAgent "Apple Initial Bitpool (editable)" 80
    defaults write com.apple.BluetoothAudioAgent "Apple Initial Bitpool Min (editable)" 80
    defaults write com.apple.BluetoothAudioAgent "Negotiated Bitpool" 80
    defaults write com.apple.BluetoothAudioAgent "Negotiated Bitpool Max" 80
    defaults write com.apple.BluetoothAudioAgent "Negotiated Bitpool Min" 80
    sudo renice -20 `pgrep coreaudiod`
    sudo renice -20 `pgrep blued`
}
